!function(){"use strict";class e{constructor(e,t,s){this.cardName=e.cardName,this.cardLink=e.cardLink,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick(this)}))}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_enabled")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardTemplate=document.querySelector(this._cardSelector).content.querySelector(".card"),this._cardElement=this._cardTemplate.cloneNode(!0),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardTitleEl.textContent=this.cardName,this._cardImageEl.setAttribute("src",this.cardLink),this._cardImageEl.setAttribute("alt",this.cardName),this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputList=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}disableButton(){return this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){return this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}toggleButtonState(){return this._hasInvalidInput()?this.disableButton():this._enableButton()}resetValidation(){this.disableButton(),this._inputList.forEach((e=>{this._hideInputError(e)}))}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeButton=document.querySelector(`${t}-close`)}open(){this._popupElement.classList.add("modal_opened"),window.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("click",this._handleOverlayClick)}close(){this._popupElement.classList.remove("modal_opened"),window.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("click",this._handleOverlayClick)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};_handleOverlayClick=e=>{e.target.classList.contains("modal_opened")&&this.close()};setEventListeners(){this._closeButton.addEventListener("click",(()=>this.close()))}}class r extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputSelector=".modal__input",this._inputList=[...this._popupForm.querySelectorAll(this._inputSelector)],this._handleFormSubmit=t}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}const n=document.querySelector(".profile__edit-button"),i=document.querySelector(".profile__add-button"),o=document.forms["add-card-form"];function a(t){return new e(t,"#card-template",m).getView()}const l=new class{constructor(e,t){let{items:s,renderer:r}=e;this._renderedItems=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._renderedItems.forEach((e=>this._renderer(e)))}addItem(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"prepend";this._container[t](e)}}({items:[{cardName:"Yosemite Valley",cardLink:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{cardName:"Lake Louise",cardLink:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{cardName:"Bald Mountains",cardLink:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{cardName:"Latemar",cardLink:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{cardName:"Vanoise National Park",cardLink:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{cardName:"Lago di Braies",cardLink:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=a(e);l.addItem(t,"append")}},".cards__list");l.renderItems();const c=new class{constructor(e){let{userName:t,userJob:s}=e;this.userName=document.querySelector(t),this.userJob=document.querySelector(s)}getUserInfo(){return this._userInfo={userName:this.userName.textContent,userJob:this.userJob.textContent},this._userInfo}setUserInfo(e){let{userName:t,userJob:s}=e;this.userName.textContent=t,this.userJob.textContent=s}}({userName:".profile__name",userJob:".profile__description"}),u=new class extends s{constructor(e){super({popupSelector:e}),this._popupImage=this._popupElement.querySelector(".modal__preview-image"),this._popupText=this._popupElement.querySelector(".modal__preview-text")}open(e){let{cardName:t,cardLink:s}=e;this._popupImage.setAttribute("src",s),this._popupImage.setAttribute("alt",t),this._popupText.textContent=t,super.open()}}("#preview-modal"),d=new r("#profile-modal",(function(e){c.setUserInfo(e),d.close()})),_=new r("#add-modal",(function(e){const t=a(e);l.addItem(t,"prepend"),_.close(),o.reset(),h["add-card-form"].disableButton()}));function m(e){u.open(e)}u.setEventListeners(),d.setEventListeners(),_.setEventListeners(),n.addEventListener("click",(()=>{h["profile-form"].resetValidation();const e=c.getUserInfo();d.setInputValues(e),d.open()})),i.addEventListener("click",(()=>{_.open()}));const h={};var p;p={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},[...document.querySelectorAll(p.formSelector)].forEach((e=>{const s=new t(p,e),r=e.getAttribute("name");h[r]=s,s.enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBUyxLQUN0Q29ILEVBQWF2RCxNQUFNLElBS3JCLE1BQU15RCxFQUFpQixDQUFDLEVBQ0VDLFFFOURKLENBQ3BCQyxhQUFjLGVBQ2RsRyxjQUFlLGdCQUNmRSxxQkFBc0Isc0JBQ3RCRSxvQkFBcUIsOEJBQ3JCRSxnQkFBaUIsMEJBQ2pCRSxXQUFZLHdCRnlESyxJQUFJbkIsU0FBU3NCLGlCQUFpQnNGLEVBQU9DLGVBQzdDcEUsU0FBU2hDLElBQ2hCLE1BQU1xRyxFQUFZLElBQUl2RyxFQUFjcUcsRUFBUW5HLEdBQ3RDc0csRUFBV3RHLEVBQVl1RyxhQUFhLFFBQzFDTCxFQUFlSSxHQUFZRCxFQUMzQkEsRUFBVXBFLGtCQUFrQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMuY2FyZE5hbWUgPSBkYXRhLmNhcmROYW1lO1xyXG4gICAgdGhpcy5jYXJkTGluayA9IGRhdGEuY2FyZExpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUljb24oKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9lbmFibGVkXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkVGVtcGxhdGUgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5jYXJkTmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLnNldEF0dHJpYnV0ZShcInNyY1wiLCB0aGlzLmNhcmRMaW5rKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLnNldEF0dHJpYnV0ZShcImFsdFwiLCB0aGlzLmNhcmROYW1lKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICByZXR1cm4gKHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgcmV0dXJuICh0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZSk7XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9lbmFibGVCdXR0b24oKTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHtwb3B1cFNlbGVjdG9yfS1jbG9zZWApO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsaWNrKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2spO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVPdmVybGF5Q2xpY2sgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBcIi5tb2RhbF9faW5wdXRcIjtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFtcclxuICAgICAgLi4udGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvciksXHJcbiAgICBdO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiLy8gSW1wb3J0IGZpbGVzXHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuXHJcbi8vZGVmaW5lIGdsb2JhbCB2YXJpYWJsZXNcclxuY29uc3QgcHJvZmlsZU1vZGFsID0gXCIjcHJvZmlsZS1tb2RhbFwiO1xyXG5jb25zdCBwcm9maWxlTmFtZSA9IFwiLnByb2ZpbGVfX25hbWVcIjtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIjtcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5jb25zdCBhZGRNb2RhbCA9IFwiI2FkZC1tb2RhbFwiO1xyXG5jb25zdCBhZGRDYXJkRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiYWRkLWNhcmQtZm9ybVwiXTtcclxuY29uc3QgcHJldmlld01vZGFsID0gXCIjcHJldmlldy1tb2RhbFwiO1xyXG5cclxuLy9hZGQgY2FyZCBzZWN0aW9uIHRvIERPTSAmIGFkZCBpbml0aWFsIGNhcmRzXHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGltYWdlQ2xpY2spO1xyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufVxyXG5cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50LCBcImFwcGVuZFwiKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBcIi5jYXJkc19fbGlzdFwiXHJcbik7XHJcblxyXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuLy9TdWJtaXQgaGFuZGxpbmcgZnVuY3Rpb25zXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChpbnB1dCkge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGlucHV0KTtcclxuICBwcm9maWxlRWRpdFBvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGlucHV0KSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGlucHV0KTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50LCBcInByZXBlbmRcIik7XHJcbiAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgYWRkQ2FyZEZvcm0ucmVzZXQoKTtcclxuICBmb3JtVmFsaWRhdG9yc1tcImFkZC1jYXJkLWZvcm1cIl0uZGlzYWJsZUJ1dHRvbigpO1xyXG59XHJcblxyXG4vLyBDcmVhdGUgdXNlciBpbmZvIGluc3RhbmNlXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICB1c2VyTmFtZTogcHJvZmlsZU5hbWUsXHJcbiAgdXNlckpvYjogcHJvZmlsZURlc2NyaXB0aW9uLFxyXG59KTtcclxuXHJcbi8vIGNyZWF0ZSBpbnN0YW5jZXMgZm9yIG1vZGFscyAtIHByZXZpZXcsIHByb2ZpbGUtZWRpdCAmIGFkZC1jYXJkXHJcbmNvbnN0IHByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShwcmV2aWV3TW9kYWwpO1xyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHByb2ZpbGVNb2RhbCxcclxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdFxyXG4pO1xyXG5cclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oYWRkTW9kYWwsIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KTtcclxuXHJcbi8vIGNhbGwgc2V0RXZlbnRsaXN0ZW5lcnMgZm9yIGVhY2ggcG9wdXBcclxuXHJcbnByZXZpZXdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wcm9maWxlRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9oYW5kbGUgbW9kYWwgdHJpZ2dlcnNcclxuZnVuY3Rpb24gaW1hZ2VDbGljayhkYXRhKSB7XHJcbiAgcHJldmlld1BvcHVwLm9wZW4oZGF0YSk7XHJcbn1cclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgY29uc3QgaW5wdXQgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVFZGl0UG9wdXAuc2V0SW5wdXRWYWx1ZXMoaW5wdXQpO1xyXG4gIHByb2ZpbGVFZGl0UG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbi8vIFZhbGlkYXRpb25cclxuXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKV07XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQsIG1ldGhvZCA9IFwicHJlcGVuZFwiKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXJbbWV0aG9kXShlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiLy8gSW5pdGlhbCBjYXJkc1xyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIGNhcmROYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgY2FyZExpbms6XHJcbiAgICAgIFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIGNhcmROYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBjYXJkTGluazpcclxuICAgICAgXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgY2FyZE5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGNhcmRMaW5rOlxyXG4gICAgICBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBjYXJkTmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBjYXJkTGluazpcclxuICAgICAgXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBjYXJkTmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGNhcmRMaW5rOlxyXG4gICAgICBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIGNhcmROYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBjYXJkTGluazpcclxuICAgICAgXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vdmFsaWRhdGlvbiB2YXJpYWJsZXNcclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmUtYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZSwgdXNlckpvYiB9KSB7XHJcbiAgICB0aGlzLnVzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZSk7XHJcbiAgICB0aGlzLnVzZXJKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJKb2IpO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHRoaXMuX3VzZXJJbmZvID0ge1xyXG4gICAgICB1c2VyTmFtZTogdGhpcy51c2VyTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgdXNlckpvYjogdGhpcy51c2VySm9iLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICAgIHJldHVybiB0aGlzLl91c2VySW5mbztcclxuICB9XHJcbiAgc2V0VXNlckluZm8oeyB1c2VyTmFtZSwgdXNlckpvYiB9KSB7XHJcbiAgICB0aGlzLnVzZXJOYW1lLnRleHRDb250ZW50ID0gdXNlck5hbWU7XHJcbiAgICB0aGlzLnVzZXJKb2IudGV4dENvbnRlbnQgPSB1c2VySm9iO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fcHJldmlldy1pbWFnZVwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fcG9wdXBUZXh0ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctdGV4dFwiKTtcclxuICB9XHJcbiAgb3Blbih7IGNhcmROYW1lLCBjYXJkTGluayB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBjYXJkTGluayk7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNldEF0dHJpYnV0ZShcImFsdFwiLCBjYXJkTmFtZSk7XHJcbiAgICB0aGlzLl9wb3B1cFRleHQudGV4dENvbnRlbnQgPSBjYXJkTmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsImNhcmROYW1lIiwiY2FyZExpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfbGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUljb24iLCJfZGVsZXRlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfY2FyZEltYWdlRWwiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJnZXRWaWV3IiwiX2NhcmRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZFRpdGxlRWwiLCJ0ZXh0Q29udGVudCIsInNldEF0dHJpYnV0ZSIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiX2hpZGVJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlRWxlbWVudCIsImlkIiwiX3Nob3dJbnB1dEVycm9yIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsImRpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwicmVzZXRWYWxpZGF0aW9uIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwiX3JlZiIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2Nsb3NlQnV0dG9uIiwib3BlbiIsIndpbmRvdyIsIl9oYW5kbGVFc2NDbG9zZSIsIl9oYW5kbGVPdmVybGF5Q2xpY2siLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJ0YXJnZXQiLCJjb250YWlucyIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsInByb2ZpbGVFZGl0QnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsImFkZENhcmRGb3JtIiwiZm9ybXMiLCJjcmVhdGVDYXJkIiwiY2FyZERhdGEiLCJpbWFnZUNsaWNrIiwiY2FyZFNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsIm1ldGhvZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImNhcmRFbGVtZW50IiwidXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJnZXRVc2VySW5mbyIsIl91c2VySW5mbyIsInNldFVzZXJJbmZvIiwiX3JlZjIiLCJwcmV2aWV3UG9wdXAiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cFRleHQiLCJwcm9maWxlRWRpdFBvcHVwIiwiYWRkQ2FyZFBvcHVwIiwicmVzZXQiLCJmb3JtVmFsaWRhdG9ycyIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIl0sInNvdXJjZVJvb3QiOiIifQ==